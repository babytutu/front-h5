import{j as F,r as n,h as T,G as U,D as $,V as z,C as G,S as D,W as j,X as E,y,x as l,q as a,F as k,N as H,z as I,l as B,R as J,$ as K,K as M,T as R,v as r,J as p,U as o,u as L,H as i}from"./api-e3f31d76.js";import"./tool-565656f8.js";const O=F({__name:"yLibrary",setup(W){const d=n([]),s=n(1),m=n(""),c=n(0),x=T(()=>Math.ceil(c.value/20)),_=n([]),v=n([]),N=()=>{s.value=1,V()},g=u=>{v.value=u.length?d.value.filter(t=>u.includes(t.extension)):d.value},V=async()=>{J({duration:0,message:"加载中...",forbidClick:!0});const u=await K.post(M.api,{url:"https://api.ylibrary.org/api/search/",data:{keyword:m.value,page:s.value,sensitive:!1},method:"post"}),{hits:t,data:b}=u;c.value=t,d.value=b,g(_.value),R()};return(u,t)=>{const b=U,h=$,w=z,f=G,S=D,C=j,q=E;return r(),y(k,null,[l(w,{onSubmit:N},{default:a(()=>[l(h,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),name:"关键字",label:"关键字",placeholder:"请填写关键字",center:"",clearable:"",rules:[{required:!0,message:"请填写关键字"}]},{button:a(()=>[l(b,{size:"small",type:"primary","native-type":"submit"},{default:a(()=>[p("查询")]),_:1})]),_:1},8,["modelValue"])]),_:1}),c.value?(r(),y(k,{key:0},[l(f,null,{default:a(()=>[p("第 "+o(s.value)+" 页， 共 "+o(c.value)+" 条 / "+o(L(x))+" 页",1)]),_:1}),l(h,{name:"stepper",label:"页数"},{input:a(()=>[l(S,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),min:"1",max:L(x),onChange:V},null,8,["modelValue","max"])]),_:1}),l(h,{name:"checkboxGroup",label:"格式"},{input:a(()=>[l(q,{onChange:g,modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=e=>_.value=e),direction:"horizontal"},{default:a(()=>[l(C,{name:"epub",shape:"square"},{default:a(()=>[p("epub")]),_:1}),l(C,{name:"pdf",shape:"square"},{default:a(()=>[p("pdf")]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):H("",!0),v.value.length?(r(!0),y(k,{key:1},I(v.value,e=>(r(),B(f,{title:e.title,label:e.publisher,key:e},{extra:a(()=>[p(o(e.year),1)]),label:a(()=>[i("p",null,"出版社:"+o(e.publisher),1),i("p",null,"ISBN: "+o(e.isbn),1),i("p",null,"格式: "+o(e.extension),1),i("p",null,"作者："+o(e.author),1)]),_:2},1032,["title","label"]))),128)):(r(),B(f,{key:2,title:"暂无结果"}))],64)}}});export{O as default};
