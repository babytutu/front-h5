import{c as X,N as ne,m as T,j as I,d as G,h as s,I as Y,L as z,q as Z,B as C,t as B,r as A,a as k,b as j,O as te,w as O,P as ae,k as U,Q as q,p as K,R as Q,i as p,n as oe,S as le,T as ie,U as se,f as ue,s as ce,u as V,V as de,F as re,y as me,W as ge,_ as fe}from"./main-ef9e9c0f.js";import{r as be,u as ve,B as _e,L as he,H as J,a as Se}from"./index-b2f44d30.js";import{C as xe}from"./index-dd991a4b.js";import{F as ye}from"./index-b6330cc5.js";import{c as Pe}from"./use-expose-f3fd770b.js";const[Te,x]=X("button"),Ce=ne({},be,{tag:T("button"),text:String,icon:String,type:T("default"),size:T("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:T("button"),loadingSize:I,loadingText:String,loadingType:String,iconPosition:T("left")});var Be=G({name:Te,props:Ce,emits:["click"],setup(e,{emit:l,slots:a}){const y=ve(),c=()=>a.loading?a.loading():s(he,{size:e.loadingSize,type:e.loadingType,class:x("loading")},null),f=()=>{if(e.loading)return c();if(a.icon)return s("div",{class:x("icon")},[a.icon()]);if(e.icon)return s(Y,{name:e.icon,class:x("icon"),classPrefix:e.iconPrefix},null)},o=()=>{let t;if(e.loading?t=e.loadingText:t=a.default?a.default():e.text,t)return s("span",{class:x("text")},[t])},b=()=>{const{color:t,plain:r}=e;if(t){const m={color:r?t:"white"};return r||(m.background=t),t.includes("gradient")?m.border=0:m.borderColor=t,m}},g=t=>{e.loading?z(t):e.disabled||(l("click",t),y())};return()=>{const{tag:t,type:r,size:m,block:h,round:v,plain:P,square:D,loading:$,disabled:S,hairline:_,nativeType:w,iconPosition:N}=e,L=[x([r,m,{plain:P,block:h,round:v,square:D,loading:$,disabled:S,hairline:_}]),{[_e]:_}];return s(t,{type:w,class:L,style:b(),disabled:S,onClick:g},{default:()=>[s("div",{class:x("content")},[N==="left"&&f(),o(),N==="right"&&f()])]})}}});const Ve=Z(Be),[Ie,M]=X("stepper"),ke=200,R=(e,l)=>String(e)===String(l),we={min:C(1),max:C(1/0),name:C(""),step:C(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:B,showMinus:B,showInput:B,longPress:B,autoFixed:B,allowEmpty:Boolean,modelValue:I,inputWidth:I,buttonSize:I,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:C(1),decimalLength:I};var Ne=G({name:Ie,props:we,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:l}){const a=(n,i=!0)=>{const{min:u,max:E,allowEmpty:d,decimalLength:F}=e;return d&&n===""||(n=Q(String(n),!e.integer),n=n===""?0:+n,n=Number.isNaN(n)?+u:n,n=i?Math.max(Math.min(+E,n),+u):n,p(F)&&(n=n.toFixed(+F))),n},y=()=>{var n;const i=(n=e.modelValue)!=null?n:e.defaultValue,u=a(i);return R(u,e.modelValue)||l("update:modelValue",u),u};let c;const f=A(),o=A(y()),b=k(()=>e.disabled||e.disableMinus||+o.value<=+e.min),g=k(()=>e.disabled||e.disablePlus||+o.value>=+e.max),t=k(()=>({width:j(e.inputWidth),height:j(e.buttonSize)})),r=k(()=>te(e.buttonSize)),m=()=>{const n=a(o.value);R(n,o.value)||(o.value=n)},h=n=>{e.beforeChange?Pe(e.beforeChange,{args:[n],done(){o.value=n}}):o.value=n},v=()=>{if(c==="plus"&&g.value||c==="minus"&&b.value){l("overlimit",c);return}const n=c==="minus"?-e.step:+e.step,i=a(ie(+o.value,n));h(i),l(c)},P=n=>{const i=n.target,{value:u}=i,{decimalLength:E}=e;let d=Q(String(u),!e.integer);if(p(E)&&d.includes(".")){const H=d.split(".");d=`${H[0]}.${H[1].slice(0,+E)}`}e.beforeChange?i.value=String(o.value):R(u,d)||(i.value=d);const F=d===String(+d);h(F?+d:d)},D=n=>{var i;e.disableInput?(i=f.value)==null||i.blur():l("focus",n)},$=n=>{const i=n.target,u=a(i.value,e.autoFixed);i.value=String(u),o.value=u,oe(()=>{l("blur",n),le()})};let S,_;const w=()=>{_=setTimeout(()=>{v(),w()},ke)},N=()=>{e.longPress&&(S=!1,clearTimeout(_),_=setTimeout(()=>{S=!0,v(),w()},Se))},L=n=>{e.longPress&&(clearTimeout(_),S&&z(n))},ee=n=>{e.disableInput&&z(n)},W=n=>({onClick:i=>{z(i),c=n,v()},onTouchstartPassive:()=>{c=n,N()},onTouchend:L,onTouchcancel:L});return O(()=>[e.max,e.min,e.integer,e.decimalLength],m),O(()=>e.modelValue,n=>{R(n,o.value)||(o.value=a(n))}),O(o,n=>{l("update:modelValue",n),l("change",n,{name:e.name})}),ae(()=>e.modelValue),()=>s("div",{role:"group",class:M([e.theme])},[U(s("button",K({type:"button",style:r.value,class:[M("minus",{disabled:b.value}),{[J]:!b.value}],"aria-disabled":b.value||void 0},W("minus")),null),[[q,e.showMinus]]),U(s("input",{ref:f,type:e.integer?"tel":"text",role:"spinbutton",class:M("input"),value:o.value,style:t.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":o.value,onBlur:$,onInput:P,onFocus:D,onMousedown:ee},null),[[q,e.showInput]]),U(s("button",K({type:"button",style:r.value,class:[M("plus",{disabled:g.value}),{[J]:!g.value}],"aria-disabled":g.value||void 0},W("plus")),null),[[q,e.showPlus]])])}});const Le=Z(Ne);const Ee=se("counter",{state:()=>({count:1}),actions:{changeCount(e){this.count=e},add(){this.count++}}}),Fe={class:"bottom-btn"},Me=G({__name:"counterPage",setup(e){const l=A(0),a=Ee(),y=k(()=>a.count);function c(){a.$reset(),l.value=a.count}function f(){a.changeCount(l.value)}function o(){a.add()}return ue(()=>{l.value=a.count}),(b,g)=>{const t=Y,r=ye,m=Le,h=xe,v=Ve;return me(),ce(re,null,[s(h,{title:"状态管理",inset:""},{default:V(()=>[s(r,{center:"","model-value":y.value,label:"计数器",readonly:""},{button:V(()=>[s(t,{name:"plus",onClick:o})]),_:1},8,["model-value"]),s(r,{name:"stepper",label:"步进器"},{input:V(()=>[s(m,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=P=>l.value=P),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),button:V(()=>[s(t,{name:"success",onClick:f})]),_:1})]),_:1}),de("div",Fe,[s(v,{round:"",block:"",type:"primary","native-type":"submit",onClick:c},{default:V(()=>[ge(" 重置 ")]),_:1})])],64)}}});const Ue=fe(Me,[["__scopeId","data-v-7152bc5d"]]);export{Ue as default};
