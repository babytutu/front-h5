import{c as ce,H as Se,m as L,j as N,d as le,h as r,I as X,q as de,g as Ae,U as Ne,$ as $e,a0 as ze,V as H,B as Fe,S as De,r as U,a1 as Oe,a as T,b as ae,M as We,a2 as qe,w as ne,n as Q,f as _e,G as je,i as A,a3 as be,a4 as re,p as ue,a5 as xe,t as Y,a6 as He,a7 as Ue,k as ie,K as oe,a8 as Ke,a9 as Ge,s as Ye,u as J,aa as Je,F as Qe,y as Xe,_ as Ze}from"./main-e9bc286d.js";import{r as pe,a as et,B as tt,L as nt,c as at,C as lt,F as it,H as he,b as ot}from"./index-d5003a57.js";import{C as st}from"./index-b10ac631.js";import{p as F,a as rt,s as ut,u as ct,r as Ce,c as dt}from"./use-expose-c919a27a.js";const[ft,j]=ce("button"),gt=Se({},pe,{tag:L("button"),text:String,icon:String,type:L("default"),size:L("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:L("button"),loadingSize:N,loadingText:String,loadingType:String,iconPosition:L("left")});var mt=le({name:ft,props:gt,emits:["click"],setup(e,{emit:a,slots:l}){const b=et(),i=()=>l.loading?l.loading():r(nt,{size:e.loadingSize,type:e.loadingType,class:j("loading")},null),d=()=>{if(e.loading)return i();if(l.icon)return r("div",{class:j("icon")},[l.icon()]);if(e.icon)return r(X,{name:e.icon,class:j("icon"),classPrefix:e.iconPrefix},null)},f=()=>{let u;if(e.loading?u=e.loadingText:u=l.default?l.default():e.text,u)return r("span",{class:j("text")},[u])},I=()=>{const{color:u,plain:c}=e;if(u){const x={color:c?u:"white"};return c||(x.background=u),u.includes("gradient")?x.border=0:x.borderColor=u,x}},m=u=>{e.loading?F(u):e.disabled||(a("click",u),b())};return()=>{const{tag:u,type:c,size:x,block:P,round:w,plain:$,square:R,loading:D,disabled:E,hairline:V,nativeType:O,iconPosition:B}=e,W=[j([c,x,{plain:$,block:P,round:w,square:R,loading:D,disabled:E,hairline:V}]),{[tt]:V}];return r(u,{type:O,class:W,style:I(),disabled:E,onClick:m},{default:()=>[r("div",{class:j("content")},[B==="left"&&d(),f(),B==="right"&&d()])]})}}});const bt=de(mt);let ht=0;function vt(){const e=Ae(),{name:a="unknown"}=(e==null?void 0:e.type)||{};return`${a}-${++ht}`}function Ie(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function yt(e,a){if(Ie(e)){if(a.required)return!1;if(a.validateEmpty===!1)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}function St(e,a){return new Promise(l=>{const b=a.validator(e,a);if($e(b)){b.then(l);return}l(b)})}function ve(e,a){const{message:l}=a;return ze(l)?l(e,a):l||""}function _t({target:e}){e.composing=!0}function ye({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function xt(e,a){const l=rt();e.style.height="auto";let b=e.scrollHeight;if(Ne(a)){const{maxHeight:i,minHeight:d}=a;i!==void 0&&(b=Math.min(b,i)),d!==void 0&&(b=Math.max(b,d))}b&&(e.style.height=`${b}px`,ut(l))}function Ct(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function M(e){return[...e].length}function se(e,a){return[...e].slice(0,a).join("")}const[It,C]=ce("field"),Vt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:N,formatter:Function,clearIcon:L("clear"),modelValue:H(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:L("focus"),formatTrigger:L("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},kt=Se({},at,Vt,{rows:N,type:L("text"),rules:Array,autosize:[Boolean,Object],labelWidth:N,labelClass:Fe,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Tt=le({name:It,props:kt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:l}){const b=vt(),i=De({status:"unvalidated",focused:!1,validateMessage:""}),d=U(),f=U(),I=U(),{parent:m}=Oe(it),u=()=>{var t;return String((t=e.modelValue)!=null?t:"")},c=t=>{if(A(e[t]))return e[t];if(m&&A(m.props[t]))return m.props[t]},x=T(()=>{const t=c("readonly");if(e.clearable&&!t){const o=u()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return o&&s}return!1}),P=T(()=>I.value&&l.input?I.value():e.modelValue),w=T(()=>{var t;const o=c("required");return o==="auto"?(t=e.rules)==null?void 0:t.some(s=>s.required):o}),$=t=>t.reduce((o,s)=>o.then(()=>{if(i.status==="failed")return;let{value:g}=P;if(s.formatter&&(g=s.formatter(g,s)),!yt(g,s)){i.status="failed",i.validateMessage=ve(g,s);return}if(s.validator)return Ie(g)&&s.validateEmpty===!1?void 0:St(g,s).then(v=>{v&&typeof v=="string"?(i.status="failed",i.validateMessage=v):v===!1&&(i.status="failed",i.validateMessage=ve(g,s))})}),Promise.resolve()),R=()=>{i.status="unvalidated",i.validateMessage=""},D=()=>a("endValidate",{status:i.status,message:i.validateMessage}),E=(t=e.rules)=>new Promise(o=>{R(),t?(a("startValidate"),$(t).then(()=>{i.status==="failed"?(o({name:e.name,message:i.validateMessage}),D()):(i.status="passed",o(),D())})):o()}),V=t=>{if(m&&e.rules){const{validateTrigger:o}=m.props,s=be(o).includes(t),g=e.rules.filter(v=>v.trigger?be(v.trigger).includes(t):s);g.length&&E(g)}},O=t=>{var o;const{maxlength:s}=e;if(A(s)&&M(t)>+s){const g=u();if(g&&M(g)===+s)return g;const v=(o=d.value)==null?void 0:o.selectionEnd;if(i.focused&&v){const S=[...t],k=S.length-+s;return S.splice(v-k,k),S.join("")}return se(t,+s)}return t},B=(t,o="onChange")=>{const s=t;t=O(t);const g=M(s)-M(t);if(e.type==="number"||e.type==="digit"){const S=e.type==="number";t=re(t,S,S)}let v=0;if(e.formatter&&o===e.formatTrigger){const{formatter:S,maxlength:k}=e;if(t=S(t),A(k)&&M(t)>+k&&(t=se(t,+k)),d.value&&i.focused){const{selectionEnd:p}=d.value,me=se(s,p);v=M(S(me))-M(me)}}if(d.value&&d.value.value!==t)if(i.focused){let{selectionStart:S,selectionEnd:k}=d.value;if(d.value.value=t,A(S)&&A(k)){const p=M(t);g?(S-=g,k-=g):v&&(S+=v,k+=v),d.value.setSelectionRange(Math.min(S,p),Math.min(k,p))}}else d.value.value=t;t!==e.modelValue&&a("update:modelValue",t)},W=t=>{t.target.composing||B(t.target.value)},K=()=>{var t;return(t=d.value)==null?void 0:t.blur()},G=()=>{var t;return(t=d.value)==null?void 0:t.focus()},n=()=>{const t=d.value;e.type==="textarea"&&e.autosize&&t&&xt(t,e.autosize)},h=t=>{i.focused=!0,a("focus",t),Q(n),c("readonly")&&K()},y=t=>{i.focused=!1,B(u(),"onBlur"),a("blur",t),!c("readonly")&&(V("onBlur"),Q(n),Ce())},z=t=>a("clickInput",t),_=t=>a("clickLeftIcon",t),q=t=>a("clickRightIcon",t),Z=t=>{F(t),a("update:modelValue",""),a("clear",t)},fe=T(()=>{if(typeof e.error=="boolean")return e.error;if(m&&m.props.showError&&i.status==="failed")return!0}),Ve=T(()=>{const t=c("labelWidth"),o=c("labelAlign");if(t&&o!=="top")return{width:ae(t)}}),ke=t=>{t.keyCode===13&&(!(m&&m.props.submitOnEnter)&&e.type!=="textarea"&&F(t),e.type==="search"&&K()),a("keypress",t)},ge=()=>e.id||`${b}-input`,Te=()=>i.status,Pe=()=>{const t=C("control",[c("inputAlign"),{error:fe.value,custom:!!l.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(l.input)return r("div",{class:t,onClick:z},[l.input()]);const o={id:ge(),ref:d,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:c("disabled"),readonly:c("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${b}-label`:void 0,onBlur:y,onFocus:h,onInput:W,onClick:z,onChange:ye,onKeypress:ke,onCompositionend:ye,onCompositionstart:_t};return e.type==="textarea"?r("textarea",o,null):r("input",ue(Ct(e.type),o),null)},we=()=>{const t=l["left-icon"];if(e.leftIcon||t)return r("div",{class:C("left-icon"),onClick:_},[t?t():r(X,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ee=()=>{const t=l["right-icon"];if(e.rightIcon||t)return r("div",{class:C("right-icon"),onClick:q},[t?t():r(X,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Be=()=>{if(e.showWordLimit&&e.maxlength){const t=M(u());return r("div",{class:C("word-limit")},[r("span",{class:C("word-num")},[t]),xe("/"),e.maxlength])}},Me=()=>{if(m&&m.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const o=l["error-message"],s=c("errorMessageAlign");return r("div",{class:C("error-message",s)},[o?o({message:t}):t])}},Le=()=>{const t=c("labelWidth"),o=c("labelAlign"),s=c("colon")?":":"";if(l.label)return[l.label(),s];if(e.label)return r("label",{id:`${b}-label`,for:l.input?void 0:ge(),onClick:g=>{F(g),G()},style:o==="top"&&t?{width:ae(t)}:void 0},[e.label+s])},Re=()=>[r("div",{class:C("body")},[Pe(),x.value&&r(X,{ref:f,name:e.clearIcon,class:C("clear")},null),Ee(),l.button&&r("div",{class:C("button")},[l.button()])]),Be(),Me()];return ct({blur:K,focus:G,validate:E,formValue:P,resetValidation:R,getValidationStatus:Te}),We(qe,{customValue:I,resetValidation:R,validateWithTrigger:V}),ne(()=>e.modelValue,()=>{B(u()),R(),V("onChange"),Q(n)}),_e(()=>{B(u(),e.formatTrigger),Q(n)}),je("touchstart",Z,{target:T(()=>{var t;return(t=f.value)==null?void 0:t.$el})}),()=>{const t=c("disabled"),o=c("labelAlign"),s=we(),g=()=>{const v=Le();return o==="top"?[s,v].filter(Boolean):v||[]};return r(lt,{size:e.size,class:C({error:fe.value,disabled:t,[`label-${o}`]:o}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ve.value,valueClass:C("value"),titleClass:[C("label",[o,{required:w.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:s&&o!=="top"?()=>s:null,title:g,value:Re,extra:l.extra})}}});const Pt=de(Tt),[wt,ee]=ce("stepper"),Et=200,te=(e,a)=>String(e)===String(a),Bt={min:H(1),max:H(1/0),name:H(""),step:H(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:Y,showMinus:Y,showInput:Y,longPress:Y,autoFixed:Y,allowEmpty:Boolean,modelValue:N,inputWidth:N,buttonSize:N,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:H(1),decimalLength:N};var Mt=le({name:wt,props:Bt,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const l=(n,h=!0)=>{const{min:y,max:z,allowEmpty:_,decimalLength:q}=e;return _&&n===""||(n=re(String(n),!e.integer),n=n===""?0:+n,n=Number.isNaN(n)?+y:n,n=h?Math.max(Math.min(+z,n),+y):n,A(q)&&(n=n.toFixed(+q))),n},b=()=>{var n;const h=(n=e.modelValue)!=null?n:e.defaultValue,y=l(h);return te(y,e.modelValue)||a("update:modelValue",y),y};let i;const d=U(),f=U(b()),I=T(()=>e.disabled||e.disableMinus||+f.value<=+e.min),m=T(()=>e.disabled||e.disablePlus||+f.value>=+e.max),u=T(()=>({width:ae(e.inputWidth),height:ae(e.buttonSize)})),c=T(()=>He(e.buttonSize)),x=()=>{const n=l(f.value);te(n,f.value)||(f.value=n)},P=n=>{e.beforeChange?dt(e.beforeChange,{args:[n],done(){f.value=n}}):f.value=n},w=()=>{if(i==="plus"&&m.value||i==="minus"&&I.value){a("overlimit",i);return}const n=i==="minus"?-e.step:+e.step,h=l(Ke(+f.value,n));P(h),a(i)},$=n=>{const h=n.target,{value:y}=h,{decimalLength:z}=e;let _=re(String(y),!e.integer);if(A(z)&&_.includes(".")){const Z=_.split(".");_=`${Z[0]}.${Z[1].slice(0,+z)}`}e.beforeChange?h.value=String(f.value):te(y,_)||(h.value=_);const q=_===String(+_);P(q?+_:_)},R=n=>{var h;e.disableInput?(h=d.value)==null||h.blur():a("focus",n)},D=n=>{const h=n.target,y=l(h.value,e.autoFixed);h.value=String(y),f.value=y,Q(()=>{a("blur",n),Ce()})};let E,V;const O=()=>{V=setTimeout(()=>{w(),O()},Et)},B=()=>{e.longPress&&(E=!1,clearTimeout(V),V=setTimeout(()=>{E=!0,w(),O()},ot))},W=n=>{e.longPress&&(clearTimeout(V),E&&F(n))},K=n=>{e.disableInput&&F(n)},G=n=>({onClick:h=>{F(h),i=n,w()},onTouchstartPassive:()=>{i=n,B()},onTouchend:W,onTouchcancel:W});return ne(()=>[e.max,e.min,e.integer,e.decimalLength],x),ne(()=>e.modelValue,n=>{te(n,f.value)||(f.value=l(n))}),ne(f,n=>{a("update:modelValue",n),a("change",n,{name:e.name})}),Ue(()=>e.modelValue),()=>r("div",{role:"group",class:ee([e.theme])},[ie(r("button",ue({type:"button",style:c.value,class:[ee("minus",{disabled:I.value}),{[he]:!I.value}],"aria-disabled":I.value||void 0},G("minus")),null),[[oe,e.showMinus]]),ie(r("input",{ref:d,type:e.integer?"tel":"text",role:"spinbutton",class:ee("input"),value:f.value,style:u.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":f.value,onBlur:D,onInput:$,onFocus:R,onMousedown:K},null),[[oe,e.showInput]]),ie(r("button",ue({type:"button",style:c.value,class:[ee("plus",{disabled:m.value}),{[he]:!m.value}],"aria-disabled":m.value||void 0},G("plus")),null),[[oe,e.showPlus]])])}});const Lt=de(Mt);const Rt=Ge("counter",{state:()=>({count:1}),actions:{changeCount(e){this.count=e},add(){this.count++}}}),At={class:"bottom-btn"},Nt=le({__name:"counterPage",setup(e){const a=U(0),l=Rt(),b=T(()=>l.count);function i(){l.$reset(),a.value=l.count}function d(){l.changeCount(a.value)}function f(){l.add()}return _e(()=>{a.value=l.count}),(I,m)=>{const u=X,c=Pt,x=Lt,P=st,w=bt;return Xe(),Ye(Qe,null,[r(P,{title:"状态管理",inset:""},{default:J(()=>[r(c,{center:"","model-value":b.value,label:"计数器",readonly:""},{button:J(()=>[r(u,{name:"plus",onClick:f})]),_:1},8,["model-value"]),r(c,{name:"stepper",label:"步进器"},{input:J(()=>[r(x,{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=$=>a.value=$),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),button:J(()=>[r(u,{name:"success",onClick:d})]),_:1})]),_:1}),Je("div",At,[r(w,{round:"",block:"",type:"primary","native-type":"submit",onClick:i},{default:J(()=>[xe(" 重置 ")]),_:1})])],64)}}});const Ot=Ze(Nt,[["__scopeId","data-v-7152bc5d"]]);export{Ot as default};
